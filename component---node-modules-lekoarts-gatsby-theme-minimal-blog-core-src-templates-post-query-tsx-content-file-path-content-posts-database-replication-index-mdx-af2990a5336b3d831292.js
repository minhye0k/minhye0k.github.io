"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[884],{4765:function(e,n,t){t.d(n,{F:function(){return E},Z:function(){return p}});var l=t(7294),a=t(8733),r=t(795),c=t(1521),m=t(6799),i=t(8871);var s=e=>{let{post:n}=e;return null};const o=["16px","8px","4px"].map((e=>"rgba(0, 0, 0, 0.1) 0px "+e+" "+e+" 0px"));var u=e=>{let{data:{post:n},children:t}=e;return(0,a.tZ)(c.Z,null,(0,a.tZ)(r.X6,{as:"h1",variant:"styles.h1"},n.title),(0,a.tZ)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,a.tZ)("time",null,n.date),n.tags&&(0,a.tZ)(l.Fragment,null," — ",(0,a.tZ)(m.Z,{tags:n.tags})),n.timeToRead&&" — ",n.timeToRead&&(0,a.tZ)("span",null,n.timeToRead," min read")),(0,a.tZ)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:o.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},t),(0,a.tZ)(s,{post:n}))};const E=e=>{var n,t,l;let{data:{post:r}}=e;return(0,a.tZ)(i.Z,{title:r.title,description:r.description?r.description:r.excerpt,image:r.banner?null===(n=r.banner)||void 0===n||null===(t=n.childImageSharp)||void 0===t||null===(l=t.resize)||void 0===l?void 0:l.src:void 0,pathname:r.slug,canonicalUrl:r.canonicalUrl})};function p(e){let{...n}=e;return l.createElement(u,n)}},6799:function(e,n,t){var l=t(8733),a=t(7294),r=t(1883),c=t(3494),m=t(9706);n.Z=e=>{let{tags:n}=e;const{tagsPath:t,basePath:i}=(0,c.Z)();return(0,l.tZ)(a.Fragment,null,n.map(((e,n)=>(0,l.tZ)(a.Fragment,{key:e.slug},!!n&&", ",(0,l.tZ)(r.Link,{sx:e=>{var n;return{...null===(n=e.styles)||void 0===n?void 0:n.a}},to:(0,m.Z)("/"+i+"/"+t+"/"+e.slug)},e.name)))))}},8871:function(e,n,t){var l=t(7294),a=t(1883),r=t(4232);n.Z=e=>{let{title:n="",description:t="",pathname:c="",image:m="",children:i=null,canonicalUrl:s=""}=e;const o=(0,r.Z)(),{siteTitle:u,siteTitleAlt:E,siteUrl:p,siteDescription:d,siteImage:g,author:y,siteLanguage:A}=o,h={title:n?n+" | "+u:E,description:t||d,url:""+p+(c||""),image:""+p+(m||g)};return l.createElement(l.Fragment,null,l.createElement("html",{lang:A}),l.createElement("title",null,h.title),l.createElement("meta",{name:"description",content:h.description}),l.createElement("meta",{name:"image",content:h.image}),l.createElement("meta",{property:"og:title",content:h.title}),l.createElement("meta",{property:"og:url",content:h.url}),l.createElement("meta",{property:"og:description",content:h.description}),l.createElement("meta",{property:"og:image",content:h.image}),l.createElement("meta",{property:"og:type",content:"website"}),l.createElement("meta",{property:"og:image:alt",content:h.description}),l.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),l.createElement("meta",{name:"twitter:title",content:h.title}),l.createElement("meta",{name:"twitter:url",content:h.url}),l.createElement("meta",{name:"twitter:description",content:h.description}),l.createElement("meta",{name:"twitter:image",content:h.image}),l.createElement("meta",{name:"twitter:image:alt",content:h.description}),l.createElement("meta",{name:"twitter:creator",content:y}),l.createElement("meta",{name:"gatsby-theme",content:"@lekoarts/gatsby-theme-minimal-blog"}),l.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:(0,a.withPrefix)("/favicon-32x32.png")}),l.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:(0,a.withPrefix)("/favicon-16x16.png")}),l.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:(0,a.withPrefix)("/apple-touch-icon.png")}),s?l.createElement("link",{rel:"canonical",href:s}):null,i)}},5938:function(e,n,t){t.r(n),t.d(n,{Head:function(){return m.F},default:function(){return i}});var l=t(7294),a=t(1151);function r(e){const n=Object.assign({h2:"h2",hr:"hr",h4:"h4",p:"p",ol:"ol",li:"li",em:"em",strong:"strong",ul:"ul",h3:"h3",code:"code",pre:"pre",span:"span",a:"a"},(0,a.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.h2,null,"Database Replication 에 대하여"),"\n",l.createElement(n.hr),"\n",l.createElement(n.h4,null,"들어가기에 앞서"),"\n",l.createElement(n.p,null,"Database Replication 이란 말 그대로 Database 를 Replication (복제) 하여 똑같은 Database를 여러 대로 나누는 것이다.\n(복제 된 Database 는 Replica 라고 한다.)\n이는 DB 가 장애가 일어났을 때 Backup 으로서의 역할을 할 수도 있고, Query 요청을 분산함으로써 전체적인 성능 향상을 이룰 수도 있다.\n이러한 장점들을 가져다주는 Database Replication 의 원리에 대해 알아보고 실제로 구축까지 진행해보자."),"\n",l.createElement(n.hr),"\n",l.createElement(n.h4,null,"Our Goals"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"Database Replication 정의와 필요성을 안다."),"\n",l.createElement(n.li,null,"Database Replication 원리를 이해하고 이에 따른 장단점을 이해한다."),"\n",l.createElement(n.li,null,"MariaDB 로 이루어진 간단한 Primary, Secondary 구조를 구축할 수 있다."),"\n"),"\n",l.createElement(n.hr),"\n",l.createElement("br"),"\n",l.createElement(n.h2,null,"MariaDB 에서의 Replication 방식"),"\n",l.createElement(n.hr),"\n",l.createElement(n.p,null,"Replication 을 위해서 처음엔 똑같은 DB 내용을 가져야 하기 때문에, Replication 할 DB 를 Dump 하여 Replica 를 생성해야 한다.\n그 다음 계속해서 바이너리 로그를 기반으로 하여 실시간으로 데이터 동기화가 이루어지는 구조이다."),"\n",l.createElement(n.p,null,"앞으로 ",l.createElement(n.em,null,l.createElement(n.strong,null,"Replication 되는 DB"))," 들을 ",l.createElement(n.em,null,l.createElement(n.strong,null,"Secondary"))," 라고 하고, ",l.createElement(n.em,null,l.createElement(n.strong,null,"Replication 대상이 되는 DB"))," 를 ",l.createElement(n.em,null,l.createElement(n.strong,null,"Primary"))," 라고 하겠다."),"\n",l.createElement(n.p,null,"보통 Primary 만 Write 가 가능하며, Secondary 들은 Read 만 가능하게 설정된다."),"\n",l.createElement(n.p,null,"실시간 데이터 동기화 과정을 정리하면 다음과 같다."),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,l.createElement(n.em,null,"Primary 에서 Write 작업 시 이루어지는 트랜잭션 완료 직전에 ",l.createElement(n.strong,null,"Binary Log")," 에 변경사항 기록 후 Secondary 에 신호 전달")),"\n",l.createElement(n.li,null,l.createElement(n.em,null,"Primary 로 부터 신호를 전달받은 Secondary 는 생성된 Primary 의 ",l.createElement(n.strong,null,"Binary Log")," 를 ",l.createElement(n.strong,null,"Replay Log")," 에 복사")),"\n",l.createElement(n.li,null,l.createElement(n.em,null,"마지막으로 Secondary 가 ",l.createElement(n.strong,null,"Replay Log")," 를 읽어서 변경 사항 반영")),"\n"),"\n",l.createElement(n.p,null,"(2번 과정이 비동기적으로 이루어진다면 Secondary 가 Log 를 복제하여 반영하는 과정을 기다려주지 않기 때문에 데이터 정합성이 깨질수도 있다.)"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"바이너리 로그 기반 복제"),"\n"),"\n"),"\n",l.createElement(n.p,null,"MariaDB 의 바이너리 로그 형식은 세 가지가 존재한다."),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,l.createElement(n.em,null,l.createElement(n.strong,null,"Statement-based")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"SQL Statement 형태로 저장"),"\n"),"\n"),"\n",l.createElement(n.li,null,l.createElement(n.em,null,l.createElement(n.strong,null,"Row-based")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"변경이 이루어진 Row Data 자체를 base64 로 Encoding 하여 저장"),"\n",l.createElement(n.li,null,"단순 insert/update/delete 에서 Statement-based 보다 처리 속도가 빠름"),"\n",l.createElement(n.li,null,"대량의 데이터 수정 시 Binary Log 사이즈가 커져 문제가 발생할 수 있음"),"\n"),"\n"),"\n",l.createElement(n.li,null,l.createElement(n.em,null,l.createElement(n.strong,null,"Mixed (Statement + Row)")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"기본적으로 Statement-based 로 저장하지만, 상황에 따라 Row-based 로 저장"),"\n"),"\n"),"\n"),"\n",l.createElement(n.p,null,"단, 어떤 타입을 선택하나 ",l.createElement(n.strong,null,"DDL")," 은 SQL Statement 로 저장된다."),"\n",l.createElement("br"),"\n",l.createElement(n.h2,null,"Replication 의 장단점"),"\n",l.createElement(n.hr),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"장점"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"Backup"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Primary 에 장애가 일어나서 복구가 불가능하거나 기타 문제가 생긴다면 Secondary 를 Primary 로 승격시켜 해결할 수 있다."),"\n"),"\n"),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"부하 분산"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"보통 ",l.createElement(n.strong,null,"Query")," 의 대부분은 ",l.createElement(n.strong,null,"Select Statement")," 로 인한 ",l.createElement(n.strong,null,"Read")," 요청이 대부분이기 때문에 이를 여러 대의 Secondary 가 나누어서\n처리하게 되면 ",l.createElement(n.em,null,l.createElement(n.strong,null,"성능 향상 효과")),"를 얻을 수 있다."),"\n"),"\n"),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"단점 (비동기형 복제의 경우)"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"데이터 정합성"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"과도한 데이터 변경 작업이 이루어 질 때 Secondary 에서 모든 변경 사항을 반영하는데 시간이 걸리기 때문에 일시적으로\n데이터 정합성이 어긋날 가능성이 있다."),"\n"),"\n"),"\n"),"\n"),"\n"),"\n",l.createElement("br"),"\n",l.createElement(n.h2,null,"실습"),"\n",l.createElement(n.hr),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"환경"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Mac OS (M1)"),"\n",l.createElement(n.li,null,"MariaDB 11.0.2"),"\n",l.createElement(n.li,null,"Datagrip"),"\n",l.createElement(n.li,null,"Iterm"),"\n"),"\n"),"\n"),"\n",l.createElement("br"),"\n",l.createElement(n.p,null,"우선 동일한 환경의 MariaDB 서버가 2대 이상 준비되어야 한다."),"\n",l.createElement(n.p,null,"참고로, 필자는 로컬 환경에서 포트를 다르게 하여 준비하였다."),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"Primary 설정"),"\n"),"\n"),"\n",l.createElement(n.hr),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"my.cnf")," 설정"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"[mysqld]\nlog-bin = mysql-bin   # 로그 파일의 파일 명\nserver-id = 2         # 서버 고유 아이디\nbinlog_format = row   # 바이너리 로그 저장 형식\nexpire_logs_days = 2  # 로그 보관 유효 기간\n")),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"restart")),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"$ sudo service mysqld restart")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"설정 파일을 적용하려면 서버를 다시 시작해주어야 한다."),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"Secondary 사용자 계정")),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"mysql>  CREATE USER '${secondary host}'@'${secondary ip}' IDENTIFIED BY '패스워드';\nmysql>  GRANT REPLICATION SLAVE ON *.* TO '${secondary host}'@'${secondary ip}' IDENTIFIED BY '패스워드';\nmysql>  FLUSH privileges;\n")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"secondary 에서 primary 로 접근하기 위한 계정을 생성하고 Replication 을 위한 권한을 주는 과정이다."),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"master status 확인 (바이너리 로그 저장 여부 및 Secondary 설정에 필요한 정보)")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"mysql> show master status;"),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 713px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 6.666666666666667%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARUlEQVR42iXFSw6AIAxAQe+lxQr0g0QT73+YZ6KLySzzfoh5YXnSPFlFKHrQLOgxsBw0j58FW1FEle5J7U61+JZdWaXwAqMsI9uhjcxKAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="show-master-status"\n        title=""\n        src="/static/11ca91d8dbac2745dd303129d4114bfd/5888a/show-master-status.png"\n        srcset="/static/11ca91d8dbac2745dd303129d4114bfd/5243c/show-master-status.png 240w,\n/static/11ca91d8dbac2745dd303129d4114bfd/ab158/show-master-status.png 480w,\n/static/11ca91d8dbac2745dd303129d4114bfd/5888a/show-master-status.png 713w"\n        sizes="(max-width: 713px) 100vw, 713px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",l.createElement(n.li,null,"File 명이 잘 나오면 바이너리 로그 기록이 잘 되고 있다는 뜻이다. 그리고 File 과 Position 정보는 Secondary 설정에 필요한\n정보이다."),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"기존 데이터베이스 마이그레이션시 필요 과정")),"\n",l.createElement(n.p,null,"5-1. Primary DB Lock 걸기"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"mysql> flush tables with read lock;")),"\n",l.createElement(n.li,null,"Primary 와 Secondary 의 데이터를 동일하게 해야됨으로 마이그레이션 도중 일어나는 데이터 변경을 막아야 한다."),"\n"),"\n",l.createElement(n.p,null,"5-2. Primary DB dump"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"$ mysqldump -u root -p DB명 > DB명.sql")),"\n"),"\n",l.createElement(n.p,null,"5-3. Secondary DB 에 Primary DB 복사"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"$ mysqldump -u root -p DB명 < DB명.sql")),"\n"),"\n",l.createElement(n.p,null,"5-4. Primary DB Lock 풀기"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"mysql> unlock tables;")),"\n",l.createElement(n.li,null,"이는 꼭!! Primary 와 Secondary 의 실시간 데이터 동기화 설정까지 마친 후 Lock 을 풀어주어야 한다."),"\n"),"\n"),"\n"),"\n",l.createElement("br"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h3,null,"Secondary 설정"),"\n"),"\n"),"\n",l.createElement(n.hr),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"my.cnf 설정")),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"[mysqld]\nlog-bin = mysql-bin\nserver-id =3\nbinlog_format = row\nexpire_logs_days = 2\n")),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"restart")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"다시 한번 강조하지만 설정을 반영하기 위해 재실행 해줘야 한다."),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"Primary 정보 입력")),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"mysql > change master to master_host = 'localhost',\nmaster_user = 'secondary',\nmaster_password = '',\nmaster_port = 3307,\nmaster_log_file = 'mysql-bin.000001',\nmaster_log_pos = 664;\n")),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"Secondary 활성화")),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"mysql> start slave;")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"위의 명령어를 실행하면 replication 을 시작하게 된다."),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,l.createElement(n.code,null,"secondary status 확인")),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"mysql> show slave status;"),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 671px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 8.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVR42j3LMQ6CMABAUQ6k4qAJEEl0qhZboFBCBNRjaBXEk3+TDg5/evmBqgey6oKqe2TZchCKg9C+vThzzC1Fe0PbAW17VN1RtneErpFF4035vyNvrgRp8yWpJnZ2Jm1mttqRmJHYjETlm416EpsPy5MjlI6VdKyzFwvx8BaZ6W9h5vgBpAhOzNccesMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="show-slave-status"\n        title=""\n        src="/static/2098f9796d25d26874f6a6ce1f32524b/508aa/show-slave-status.png"\n        srcset="/static/2098f9796d25d26874f6a6ce1f32524b/5243c/show-slave-status.png 240w,\n/static/2098f9796d25d26874f6a6ce1f32524b/ab158/show-slave-status.png 480w,\n/static/2098f9796d25d26874f6a6ce1f32524b/508aa/show-slave-status.png 671w"\n        sizes="(max-width: 671px) 100vw, 671px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n위와 화면에서 ",l.createElement(n.em,null,"Slave_IO_State")," 가 ",l.createElement(n.em,null,"Waiting for master to send event")," 로 primary 의 이벤트를 기다리고 있고, Secondary 의 ",l.createElement(n.em,null,"SQL Thread")," 와\n",l.createElement(n.em,null,"IO Thread")," 가 동작중임을 확인할 수 있다. 이는 곧 Replication 이 정상적으로 이루어지고 있음을 의미한다."),"\n"),"\n"),"\n",l.createElement("br"),"\n",l.createElement(n.h3,null,"동작 확인"),"\n",l.createElement(n.p,null,"간단하게 확인하기 위하여 최소한의 동작에 대해서 테스트 해보았다."),"\n",l.createElement(n.p,null,"여기에 이용된 테이블인 ",l.createElement(n.strong,null,"repl_test")," 의 DDL 은 다음과 같다."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-SQL"},"create table repl_test\n(\n    seq      bigint       not null\n        primary key,\n    contents varchar(500) null\n)\n")),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,"write query 실행"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"insert into repl_go values (3, 'test1234');"),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 398px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVR42l2R266bMBBF+Z1WzaEQO9xsYwy+EZqo6v9/y6pw0qO2D0uzveXLnnFlncV4hbEjR+q4h56w9dz9jS067r9+Eh8HITke8VZ8F1f0apnciN0Nyz6jo8FuhmrShpNRGbR+oZRGK43SM9oshaK1wWjNpAzTdJ556080lQsJuwXsFl/4yOJf9eX/zWvPGvMnLuR/1tVsHT+OJyFmQtrx56Ztw8dEzDsxZ1YfCCkXL6T07kiXRON/VLKTzMEwzRNxmfGrY9u20to8n21qhmFgdQ5rbfG+1zX1xwcfl0vRf6jrmkr0gtrWNGNL0pLVKvb7Qdf3XK8CIQRXIZBSIoRESFm0lIKu62jblqZpPqn6YeA4Drz3xJjIKWBnQ/Ar9z2TUsI5x/P5ZE+RPQWcOz9Js/mN203StA1X0ZbLq2sv+Gq+8K27EMaWbFp01xJVyzxKQozlsWU2rENNUi3WKPpRIW4Nkx0YTY+yI13XvxI+Hg9CCOScie9E5xzPdKc/TVOpy2LJOZH3nRB8memyLAWlVJnhb7skN/IbdNZbAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="insert"\n        title=""\n        src="/static/b82c8b4a670d607fe45741d264a97ec5/48cfd/insert.png"\n        srcset="/static/b82c8b4a670d607fe45741d264a97ec5/5243c/insert.png 240w,\n/static/b82c8b4a670d607fe45741d264a97ec5/48cfd/insert.png 398w"\n        sizes="(max-width: 398px) 100vw, 398px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n"),"\n"),"\n",l.createElement(n.li,null,"\n",l.createElement(n.h4,null,"secondary 변경 사항"),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 776px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.083333333333332%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqklEQVR42pWMXQ6DIBAGuRFgLf8oBdRETR+8/12+hm1s0vbJh8nOZDfLxvmJWHfEaUfZDuT1IA91g8/rZVhaFpRpRl1WDI9KpDLDxYReO9yNvwRz2aMkhyknOOfgrEUMAdYaaK3QdRJCcEjBaZ7+26czYW4YjUAdPXyM9LTve0gpCSHEH5xz4rvfznyImAaLWjLimBCChzGGaM+ttYTW+kPrtlNKUTdv981fWB2nL1gfHNoAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="select"\n        title=""\n        src="/static/cb638418c9df89ff8fa5ed814261cfe4/97f2a/select.png"\n        srcset="/static/cb638418c9df89ff8fa5ed814261cfe4/5243c/select.png 240w,\n/static/cb638418c9df89ff8fa5ed814261cfe4/ab158/select.png 480w,\n/static/cb638418c9df89ff8fa5ed814261cfe4/97f2a/select.png 776w"\n        sizes="(max-width: 776px) 100vw, 776px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n"),"\n"),"\n",l.createElement(n.p,null,"Replication 이 실시간으로 잘 이루어지고 있음을 확인 할 수 있다."),"\n",l.createElement("br"),"\n",l.createElement(n.h3,null,"마치며"),"\n",l.createElement(n.hr),"\n",l.createElement(n.p,null,"지금까지 MariaDB 를 이용하여 Database Replication 의 원리와 장단점에 대해 알아보고 실습까지\n진행해보았다. 최소한의 구조와 환경을 토대로 알아보았기 때문에 비교적 각 주제에 대해 깊게 알아보진 못하였다.\n이 글에서 다루지 않은 비동기, 동기 복제 방식의 차이점과 Trade-Off, ",l.createElement(n.code,null,"my.cnf")," 를 작성할 때 Database 설정을 좀 더 Optimizing 할 수 있는\n설정 변수들에 대해선 깊게 다루지 않았다. 참고에 해당 관련 링크들을 남겨놓았으니 글들을 더 읽어보는 것이 좋다."),"\n",l.createElement("br"),"\n",l.createElement(n.h3,null,"참고"),"\n",l.createElement(n.hr),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.a,{href:"https://jane096.github.io/project/mysql-master-slave-replication/"},"부하 분산을 위해 MySQL을 Master/Slave로 이중화를 구성해 본 이야기")),"\n",l.createElement(n.li,null,l.createElement(n.a,{href:"http://channy.creation.net/project/dev.kthcorp.com/2011/09/16/mysql-replication-binlog-format-mixed-vs-row/index.html"},"MySQL Replication 구성 시 Binlog format 결정하기 – MIXED vs ROW !!")),"\n",l.createElement(n.li,null,l.createElement(n.a,{href:"http://intomysql.blogspot.com/2010/12/mysql-binary-log.html"},"MySQL Binary log의 일관성 유지")),"\n",l.createElement(n.li,null,l.createElement(n.a,{href:"http://coolx.net/m/cboard/read.jsp?db=develop&mode=read&num=811&_currPage=1&listCnt=20&category=-1&fval="},"Innodb 최적화 (MySQL)")),"\n"))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?l.createElement(n,e,l.createElement(r,e)):r(e)},m=t(4765);function i(e){return l.createElement(m.Z,e,l.createElement(c,e))}m.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-database-replication-index-mdx-af2990a5336b3d831292.js.map